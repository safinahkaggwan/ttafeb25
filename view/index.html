<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>TTA - Index</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="./assets/img/fav.png" rel="icon">
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="./assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="./assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="./assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="./assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="./assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="./assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="./assets/css/style1.css" rel="stylesheet">

  
      <script>
        // Fetch statistics from orders, products, and users
        function fetchStatistics() {
            const token = localStorage.getItem('token');

            // Fetch users data
            $.ajax({
                url: 'http://localhost:5500/users', // Use https for secure requests
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                success: function(response) {
                    // Check if 'user' or 'users' array exists and has a valid length
                    if (response.users && response.users.length > 0) {
                        $('#totalUsers').text(response.users.length);
                    } else {
                        $('#totalUsers').text('0');
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching users:', error);
                    $('#totalUsers').text('0');
                }
            });

         // Fetch groups data
            $.ajax({
                url: 'http://localhost:5500/groups',
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                success: function(response) {
                    // Check if 'groups' or 'groups' array exists and has a valid length
                    if (response.groups && response.groups.length > 0) {
                        $('#totalGroups').text(response.groups.length);
                    } else {
                        $('#totalGroups').text('0');
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching groups:', error);
                    $('#totalGroups').text('0');
                }
            });

            // Fetch tournaments data
            $.ajax({
                url: 'http://localhost:5500/tournaments',
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                success: function(response) {
                    // Check if 'tournaments' or 'tournaments' array exists and has a valid length
                    if (response.tournaments && response.tournaments.length > 0) {
                        $('#totalTournaments').text(response.tournaments.length);
                    } else {
                        $('#totalTournaments').text('0');
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching tournaments:', error);
                    $('#totalTournaments').text('0');
                }
            });

             // Fetch clubs data
            $.ajax({
                url: 'http://localhost:5500/clubs', // Use https for secure requests
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                success: function(response) {
                    // Check if 'user' or 'users' array exists and has a valid length
                    if (response.clubs && response.clubs.length > 0) {
                        $('#totalClubs').text(response.clubs.length);
                    } else {
                        $('#totalClubs').text('0');
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching clubs:', error);
                    $('#totalClubs').text('0');
                }
            });

            // Fetch players data
            $.ajax({
                url: 'http://localhost:5500/players', // Use https for secure requests
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                success: function(response) {
                    // Check if 'user' or 'users' array exists and has a valid length
                    if (response.players && response.players.length > 0) {
                        $('#totalplayers').text(response.players.length);
                    } else {
                        $('#totalplayers').text('0');
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching players:', error);
                    $('#totalplayers').text('0');
                }
            });

        }

        // Logout function to clear the token and redirect to login page
        function logout() {
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        }

        $(document).ready(function() {
            fetchStatistics();  // Fetch statistics when page loads
        });
    </script>

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top header-transparent">
    <div class="container d-flex align-items-center justify-content-between position-relative">

      <div class="logo">
        <a href="index.html"><img src="./assets/img/bdlg.png" alt="" class="img-fluid"></a>
      </div>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="#hero">Home</a></li>
          <li><a class="nav-link scrollto" href="#about">About Us</a></li>
          <li><a class="nav-link scrollto" href="#services">Gallery</a></li>
          <li><a class="nav-link scrollto" href="#h">Tornaments</a></li>
          <li><a class="nav-link scrollto" href="#team">Team</a></li>
          <li><a class="nav-link scrollto" href="#contact">Contact</a></li>
          <li><a class="nav-link" href="login.html">Login</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero">
    <div class="hero-container" data-aos="fade-up">
      <a href="#about" class="btn-get-started scrollto"><i class="bx bx-chevrons-down"></i></a>
    </div>
  </section><!-- End Hero -->

  <main id="main">

    <!-- ======= About Section ======= -->
    <section id="about" class="about">
      <div class="container">

        <div class="row no-gutters">
          <div class="content col-xl-5 d-flex align-items-stretch" data-aos="fade-up">
            <div class="content">
              <h3>About Us</h3>
              <p >
At Tanzania Tennis Association, we are dedicated to promoting the sport of tennis within our community. Our mission is to provide a supportive and inclusive environment for players of all ages and skill levels. Whether you're a beginner looking to learn the basics or an experienced player aiming to compete, we offer programs and events to help you achieve your tennis goals.              </p>
              <a href="pages-login.html" class="about-btn">Login <i class="bx bx-chevron-right"></i></a>
            </div>
          </div>
          <div class="col-xl-7 d-flex align-items-stretch">
            <div class="icon-boxes d-flex flex-column justify-content-center">
              <div class="row">
                <div class="col-md-6 icon-box" data-aos="fade-up" data-aos-delay="100">
                  <i class="bx bx-receipt"></i>
                  <h4>Coaching and Training:</h4>
                  <p>Professional coaching for beginners, intermediate, and advanced players.</p>
                </div>
                <div class="col-md-6 icon-box" data-aos="fade-up" data-aos-delay="200">
                  <i class="bx bx-shield"></i>
                  <h4>Tournaments and Leagues:</h4>
                  <p>Regular tournaments and league matches for competitive play</p>
                </div>
                <div class="col-md-6 icon-box" data-aos="fade-up" data-aos-delay="300">
                  <i class="bx bx-images"></i>
                  <h4>Youth Programs:</h4>
                  <p>Special programs for young players to develop their skills and passion for tennis.</p>
                </div>
                <div class="col-md-6 icon-box" data-aos="fade-up" data-aos-delay="400">
                  <i class="bx bx-cube-alt"></i>
                  <h4>Community Events:</h4>
                  <p>Social events and activities to foster a sense of community among tennis enthusiasts.</p>
                </div>
              </div>
            </div><!-- End .content-->
          </div>
        </div>

      </div>
    </section><!-- End About Section -->

    <!-- ======= Services Section ======= -->
    <section id="services" class="portifolio">
      <div class="container">

        <div class="section-title" data-aos="fade-in" data-aos-delay="100">
          <h2>Gallery</h2>
        </div>

        <div class="row">
          <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/im2.jpeg" class="img-fluid" alt="">
            </div>
          </div>

          <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/img35.jpeg" class="img-fluid" alt="">
            </div>
          </div>

          <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/img36.jpeg" class="img-fluid" alt="">
            </div>
          </div>
                    <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/img26.jpeg" class="img-fluid" alt="">
            </div>
          </div>

                    <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/img18.jpeg" class="img-fluid" alt="">
            </div>
          </div>
           <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/img21.jpeg" class="img-fluid" alt="">
            </div>
          </div>
           <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/img22.jpeg" class="img-fluid" alt="">
            </div>
          </div>

          <div class="col-lg-3 col-md-4">
            <div class="services-wrap">
              <img src="./assets/img/img32.jpeg" class="img-fluid" alt="">
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Services Section -->

    <!-- ======= Counts Section ======= -->
    <section id="counts" class="counts  section-bg">
      <div class="container">

        <div class="row no-gutters">

          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">
            <div class="count-box">
              <i class="bi bi-emoji-smile"></i>
              <span data-purecounter-start="0" data-purecounter-end="232" data-purecounter-duration="1" class="purecounter"></span>
              <p><strong id="totalClubs"></strong>Clubs</p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">
            <div class="count-box">
              <i class="bi bi-journal-richtext"></i>
              <span data-purecounter-start="0" data-purecounter-end="521" data-purecounter-duration="1" class="purecounter"></span>
              <p><strong id="totalTournaments"></strong> Tornaments</p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">
            <div class="count-box">
              <i class="bi bi-headset"></i>
              <span data-purecounter-start="0" data-purecounter-end="1463" data-purecounter-duration="1" class="purecounter"></span>
              <p><strong id="totalGroups"></strong>Groups</p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">
            <div class="count-box">
              <i class="bi bi-people"></i>
              <span data-purecounter-start="0" data-purecounter-end="15" data-purecounter-duration="1" class="purecounter"></span>
              <p><strong id="totalplayers"></strong>Players</p>
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Counts Section -->

    <!-- ======= Portfolio Section ======= -->
    <section id="portifolio" class="services">
      <div class="container" id="h">

        <div class="section-title" data-aos="fade-in" data-aos-delay="100">
          <h2>Tornaments</h2>
          <p>Magnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem. Sit sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea. Quia fugiat sit in iste officiis commodi quidem hic quas.</p>
        </div>

       <!-- <div class="row" data-aos="fade-in">
          <div class="col-lg-12 d-flex justify-content-center">
            <ul id="portifolio-flters">
              <li data-filter="*" class="filter-active">All</li>
              <li data-filter=".filter-app">Today</li>
              <li data-filter=".filter-card">This Week</li>
              <li data-filter=".filter-web">This Month</li>
            </ul>
          </div>
        </div>-->
        <div class="row" id="tournamentsTable">
          <div class="col-lg-3 col-md-6 portfolio-item filter-app">
            <div class="portfolio-wrap">
                <div class="icon-box" data-aos="fade-up" data-aos-delay="100">
                    <div class="icon"><i class="bx bx-file"></i></div>
                    <h4 class="title"><a href="">Tournament 1</a></h4>
                    <p class="description">Date:</p>
                    <p class="description">Venue:</p>
                </div>
            </div>
          </div>

         <!-- <div class="col-lg-3 col-md-6 portfolio-item filter-app">
            <div class="portfolio-wrap">
                <div class="icon-box" data-aos="fade-up" data-aos-delay="100">
                    <div class="icon"><i class="bx bx-file"></i></div>
                    <h4 class="title"><a href="">Tournament 2</a></h4>
                    <p class="description">Date:</p>
                    <p class="description">Venue:</p>
                </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 portfolio-item filter-app">
            <div class="portfolio-wrap">
                <div class="icon-box" data-aos="fade-up" data-aos-delay="100">
                    <div class="icon"><i class="bx bx-file"></i></div>
                    <h4 class="title"><a href="">Tournament 3</a></h4>
                    <p class="description">Date:</p>
                    <p class="description">Venue:</p>
                </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 portfolio-item filter-app">
            <div class="portfolio-wrap">
                <div class="icon-box" data-aos="fade-up" data-aos-delay="100">
                    <div class="icon"><i class="bx bx-file"></i></div>
                    <h4 class="title"><a href="">Tournament 4</a></h4>
                    <p class="description">Date:</p>
                    <p class="description">Venue:</p>
                </div>
            </div>
          </div>-->

        </div>

      </div>
    </section><!-- End Portfolio Section -->

    <!-- ======= Team Section ======= -->
    <section id="team" class="team">
      <div class="container">

        <div class="section-title" data-aos="fade-in" data-aos-delay="100">
          <h2>Team</h2>
          <p>Magnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem. Sit sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea. Quia fugiat sit in iste officiis commodi quidem hic quas.</p>
        </div>

        <div class="row">

          <div class="col-lg-4 col-md-6">
            <div class="member" data-aos="fade-up">
              <div class="pic"><img src="./assets/img/team/team-1.jpg" class="img-fluid" alt=""></div>
              <div class="member-info">
                <h4>mm1</h4>
                <span>Chief Executive Officer</span>
                <div class="social">
                  <a href=""><i class="bi bi-twitter"></i></a>
                  <a href=""><i class="bi bi-facebook"></i></a>
                  <a href=""><i class="bi bi-instagram"></i></a>
                  <a href=""><i class="bi bi-linkedin"></i></a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6">
            <div class="member" data-aos="fade-up" data-aos-delay="150">
              <div class="pic"><img src="./assets/img/team/team-2.jpg" class="img-fluid" alt=""></div>
              <div class="member-info">
                <h4>mm2</h4>
                <span>Product Manager</span>
                <div class="social">
                  <a href=""><i class="bi bi-twitter"></i></a>
                  <a href=""><i class="bi bi-facebook"></i></a>
                  <a href=""><i class="bi bi-instagram"></i></a>
                  <a href=""><i class="bi bi-linkedin"></i></a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6">
            <div class="member" data-aos="fade-up" data-aos-delay="300">
              <div class="pic"><img src="./assets/img/team/team-3.jpg" class="img-fluid" alt=""></div>
              <div class="member-info">
                <h4>mm3</h4>
                <span>CTO</span>
                <div class="social">
                  <a href=""><i class="bi bi-twitter"></i></a>
                  <a href=""><i class="bi bi-facebook"></i></a>
                  <a href=""><i class="bi bi-instagram"></i></a>
                  <a href=""><i class="bi bi-linkedin"></i></a>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Team Section -->

    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact section-bg">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Contact</h2>
          <p>Magnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem. Sit sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea. Quia fugiat sit in iste officiis commodi quidem hic quas.</p>
        </div>

        <div class="row">
          <div class="col-lg-6">
            <div class="info-box mb-4">
              <i class="bx bx-map"></i>
              <h3>Our Address</h3>
              <p>A108 , Tanzania</p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6">
            <div class="info-box  mb-4">
              <i class="bx bx-envelope"></i>
              <h3>Email Us</h3>
              <p> info@tta.or.tz</p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6">
            <div class="info-box  mb-4">
              <i class="bx bx-phone-call"></i>
              <h3>Call Us</h3>
              <p>+1 5589 55488 55</p>
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-4 col-md-6">
            <div class="footer-info">
              <img style="max-height:100px;" src="./assets/img/ttalogo.png" alt="" class="img-fluid">
              <p class="pb-3"><em>Qui repudiandae et eum dolores alias sed ea. Qui suscipit veniam excepturi quod.</em></p>
              <p>
                A108 <br>
                Tanzania, <br><br>
                <strong>Phone:</strong> +1 5589 55488 55<br>
                <strong>Email:</strong> info@tta.or.tz<br>
              </p>
              <div class="social-links mt-3">
                <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                <a href="https://www.instagram.com/tennis_tanzania/" class="instagram"><i class="bx bxl-instagram"></i></a>
                <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
                <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Home</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">About us</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Services</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Terms of service</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Privacy policy</a></li>
            </ul>
          </div>

          <div class="col-lg-3 col-md-6 footer-links">
            <h4>Our Services</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Couching & Training</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Tournaments & Legues</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Youth programs</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Community Events</a></li>
            </ul>
          </div>

        <div class="col-lg-2 col-md-6 footer-links">
            <h4>Our Groups</h4>
            <ul id="gid">
              <li><i class="bx bx-chevron-right"></i> <a href="#"></a></li>
            </ul>
          </div>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>TTA</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
         Designed by <a href="#">KS SynerTech</a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
<script>
// Fetch all tournaments and display only those that haven't passed
// Fetch all tournaments and display only those that haven't passed
function fetchtournaments() {
    $.ajax({
        url: 'http://localhost:5500/tournaments',
        method: 'GET',
        success: function(response) {
            console.log(response); // Inspect the response structure in the browser console
            let tournaments = response.tournaments || response;  // Adjust based on the actual response structure

            if (!Array.isArray(tournaments) || tournaments.length === 0) {
                alert("No tournaments found");
                return;
            }

            let tournamentsTable = $('#tournamentsTable'); // Select the tournaments table
            tournamentsTable.empty(); // Clear existing entries

            // Get current date without time (to avoid timezone issues)
            const currentDate = new Date();
            currentDate.setHours(0, 0, 0, 0);  // Set time to 00:00:00 for accurate comparison

            // Iterate over the tournaments and append only future ones to the table
            tournaments.forEach(function(tournament) {
                // Parse tournament date and ensure it's in the correct format
                let tournamentDate = new Date(tournament.tdate);
                tournamentDate.setHours(0, 0, 0, 0);  // Also remove the time for comparison

                // Check if the tournament date is in the future or today
                if (tournamentDate >= currentDate) {
                    // Dynamically add each tournament's data to the tournamentsTable
                    tournamentsTable.append(`
                        <div class="col-lg-3 col-md-6 portfolio-item filter-app">
                            <div class="portfolio-wrap">
                                <div class="icon-box" data-aos="fade-up" data-aos-delay="100">
                                    <div class="icon"><i class="bx bx-file"></i></div>
                                    <h4 class="title"><a href="#">${tournament.tname}</a></h4>
                                    <p class="description">Date: ${new Date(tournament.tdate).toLocaleDateString()}</p>
                                    <p class="description">Venue: ${tournament.tlocation}</p>
                                </div>
                            </div>
                        </div>
                    `);
                }
            });
        },
        error: function(err) {
            console.error('Error fetching tournaments:', err);
            alert('Error fetching tournaments: ' + (err.responseJSON?.message || err.statusText));
        }
    });
}

// Fetch tournaments on page load
$(document).ready(function() {
    fetchtournaments();
});

</script>

   <script>
   function fetchGroups() {
    $.ajax({
        url: 'http://localhost:5500/groups',  // Correct URL to fetch groups
        method: 'GET',
        success: function(response) {
            console.log(response);  // Inspect the response structure in the browser console
            let groups = response.groups || response;  // Adjust this based on actual response structure

            if (!Array.isArray(groups) || groups.length === 0) {
                alert("No groups found");
                return;
            }

            let groupsList = $('#gid');  // Assuming '#gid' is a <select> element
            groupsList.empty();  // Clear any existing options

            // Iterate over the groups and append them as options in the dropdown
            groups.forEach(function(group) {
                groupsList.append(`
                    <li><i class="bx bx-chevron-right"></i> <a href="#">${group.gname}</a></li>
                `);
            });
        },
        error: function(err) {
            console.error('Error fetching groups:', err);
            alert('Error fetching groups: ' + (err.responseJSON?.message || err.statusText));
        }
    });
}

// Fetch groups on page load
$(document).ready(function() {
    fetchGroups();
});

  </script>

  <!-- Vendor JS Files -->
  <script src="./assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="./assets/vendor/aos/aos.js"></script>
  <script src="./assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="./assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="./assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="./assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="./assets/js/main1.js"></script>

</body>

</html>